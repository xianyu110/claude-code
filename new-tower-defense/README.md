# 🎮 多人塔防游戏

一个完整的Web塔防游戏，支持单人和多人模式，使用HTML5 Canvas、JavaScript和Socket.IO构建。

## 🌟 功能特色

### 🎯 单人模式
- **三种炮塔类型**：基础炮塔、重炮塔、速射炮塔
- **三个难度关卡**：简单、中等、困难
- **完整游戏循环**：波次系统、资源管理、失败条件
- **现代化UI**：响应式设计、动画效果、游戏状态显示

### 👥 多人模式
- **最多4人联机**：支持局域网和互联网游戏
- **区域分配系统**：每个玩家负责固定区域建造炮塔
- **实时同步**：游戏状态、炮塔建造、敌人移动同步
- **房间管理**：创建/加入房间、玩家准备状态
- **实时聊天**：大厅聊天和游戏内聊天系统

### ⚡ 技术亮点
- **前后端分离**：单人和多人代码模块化设计
- **实时通信**：基于Socket.IO的WebSocket连接
- **高性能渲染**：60FPS游戏循环和Canvas优化
- **错误处理**：完善的错误处理和重连机制

## 🚀 快速开始

### 安装依赖
```bash
cd new-tower-defense
npm install
```

### 启动单人模式
```bash
# 方法1：使用Python（推荐）
python3 -m http.server 8000

# 方法2：使用Node.js静态服务器
npx http-server -p 8000
```

然后访问：http://localhost:8000

### 启动多人模式
```bash
# 启动服务器
npm start

# 或者使用开发模式（自动重启）
npm run dev
```

然后访问：
- **多人模式**：http://localhost:3000/multiplayer.html
- **单人模式**：http://localhost:3000

### 局域网游戏
1. 确保防火墙允许端口3000
2. 获取本机IP地址
3. 其他设备访问：`http://[你的IP]:3000/multiplayer.html`

## 🎮 游戏玩法

### 单人模式
1. 选择关卡难度
2. 选择炮塔类型并在空地上点击建造
3. 点击"开始波次"开始游戏
4. 防止敌人到达终点，保护生命值

### 多人模式
1. 输入玩家名称和房间ID
2. 等待其他玩家加入并准备
3. 房主开始游戏
4. 只能在自己的区域内建造炮塔
5. 团队协作抵御敌人

## 🏗️ 炮塔系统

| 炮塔类型 | 费用 | 伤害 | 射程 | 射速 | 特点 |
|---------|------|------|------|------|------|
| 基础炮塔 | 20 | 25 | 150 | 1000ms | 平衡型，适合新手 |
| 重炮塔 | 50 | 75 | 120 | 1500ms | 高伤害，适合关键位置 |
| 速射炮塔 | 35 | 15 | 180 | 400ms | 高射速，适合群体清理 |

## 🎯 关卡设计

### 简单关卡
- **波次数量**：10波
- **敌人类型**：基础敌人
- **起始资源**：100金币，20生命值
- **适合**：新手玩家学习游戏机制

### 中等关卡
- **波次数量**：12波
- **敌人类型**：基础敌人 + 快速敌人
- **起始资源**：80金币，15生命值
- **适合**：有一定经验的玩家

### 困难关卡
- **波次数量**：15波
- **敌人类型**：基础敌人 + 快速敌人 + 重型敌人
- **起始资源**：60金币，10生命值
- **适合**：经验丰富的玩家和团队合作

## 🛠️ 技术架构

### 前端技术
- **HTML5 Canvas**：游戏渲染引擎
- **原生JavaScript**：游戏逻辑和类设计
- **CSS3**：现代化UI样式和动画
- **Socket.IO客户端**：实时通信

### 后端技术
- **Node.js + Express**：Web服务器
- **Socket.IO**：WebSocket实时通信
- **内存存储**：房间和游戏状态管理

### 项目结构
```
new-tower-defense/
├── index.html          # 单人模式页面
├── game.js            # 单人游戏逻辑
├── style.css          # 单人模式样式
├── multiplayer.html   # 多人模式页面
├── multiplayer.js     # 多人客户端逻辑
├── multiplayer.css    # 多人模式样式
├── server.js          # 服务器端代码
├── package.json       # 项目配置和依赖
└── README.md         # 项目说明文档
```

## 🎨 设计特色

### UI/UX设计
- **现代化风格**：渐变背景、圆角设计、阴影效果
- **响应式布局**：适配桌面和移动设备
- **直观操作**：点击建造、拖拽选择、状态反馈
- **信息丰富**：实时状态显示、血条、射程指示

### 游戏体验
- **平滑动画**：敌人移动、子弹飞行、爆炸效果
- **音效系统**：（可扩展）攻击、建造、游戏结束音效
- **反馈机制**：即时消息提示、状态变化动画
- **可扩展性**：模块化代码，易于添加新功能

## 🔧 开发指南

### 添加新炮塔类型
1. 在`GAME_CONFIG.towers`中添加配置
2. 更新HTML中的炮塔按钮
3. 在服务器端`towerConfigs`中添加对应配置

### 添加新敌人类型
1. 在`GAME_CONFIG.enemies`中添加配置
2. 更新关卡配置中的`enemyTypes`
3. 在渲染函数中添加新的绘制逻辑

### 扩展关卡系统
1. 在`GAME_CONFIG.levels`中添加新关卡
2. 更新HTML中的关卡选择按钮
3. 调整敌人生成和波次逻辑

## 🚀 部署说明

### 本地开发
```bash
# 单人模式
python3 -m http.server 8000

# 多人模式
npm start
```

### 生产环境
```bash
# 使用PM2进行进程管理
npm install -g pm2
pm2 start server.js --name "tower-defense"

# 使用Nginx作为反向代理
# 配置文件示例在nginx.conf中
```

### Docker部署
```dockerfile
FROM node:16
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

## 🤝 贡献指南

欢迎提交Issues和Pull Requests！

### 开发环境设置
1. Fork项目仓库
2. 创建功能分支：`git checkout -b feature/new-feature`
3. 提交更改：`git commit -m 'Add new feature'`
4. 推送分支：`git push origin feature/new-feature`
5. 创建Pull Request

### 代码规范
- 使用ES6+语法
- 注释清晰，函数功能明确
- 遵循现有的代码风格
- 添加必要的错误处理

## 📈 未来规划

### 短期计划
- [ ] 添加音效系统
- [ ] 实现炮塔升级功能
- [ ] 添加更多敌人类型
- [ ] 优化移动端体验

### 长期计划
- [ ] 技能系统和特殊能力
- [ ] 成就系统和排行榜
- [ ] 地图编辑器
- [ ] AI对手模式
- [ ] 移动App版本

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者！

---

🎮 **开始游戏吧！** 体验单人挑战或与朋友一起协作抵御敌人入侵！ 